# üí∞ Wallet API

HTTP API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏: –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, —Å–ø–∏—Å–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞.  
Go + PostgreSQL + –æ—á–µ—Ä–µ–¥—å —Å –±–∞—Ç—á–∏–Ω–≥–æ–º –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

```bash
git clone <repo-url> wallet-api
cd wallet-api
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config.env` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ –Ω–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `config.env.example` (Ctrl+C ‚Üí Ctrl+V).  
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç–µ `DB_PASSWORD` –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫

**üê≥ Docker Compose** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
docker compose up -d
```

PostgreSQL + –º–∏–≥—Ä–∞—Ü–∏–∏ + –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

**üíª –ë–µ–∑ Docker** (–ª–æ–∫–∞–ª—å–Ω–æ):

```bash
# PostgreSQL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
go run ./cmd
```

> ‚úÖ **–ì–æ—Ç–æ–≤–æ!** API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8080`

---

## üì° API

| –ú–µ—Ç–æ–¥  | URL                    | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                        |
| ------ | ---------------------- | --------------------------------------------------------------------------------------------------------------- |
| `POST` | `/api/v1/wallet`       | –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ —Å–ø–∏—Å–∞–Ω–∏–µ. Body: `{ "walletId": "uuid", "operationType": "DEPOSIT"\|"WITHDRAW", "amount": 1000 }` |
| `GET`  | `/api/v1/wallets/{id}` | –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞                                                                                        |

---

## ‚ö° Load Test

### hey (CLI)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
go install github.com/rakyll/hey@latest
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# GET –±–∞–ª–∞–Ω—Å–∞ ‚Äî 100 RPS, 10 —Å
hey -z 10s -q 100 -c 20 http://localhost:8080/api/v1/wallets/550e8400-e29b-41d4-a716-446655440000

# POST –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî 500 RPS, 15 —Å
hey -z 15s -q 500 -c 50 -m POST -H "Content-Type: application/json" \
  -d '{"walletId":"550e8400-e29b-41d4-a716-446655440001","operationType":"DEPOSIT","amount":1000}' \
  http://localhost:8080/api/v1/wallet
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ                 |
| -------- | ------------------------ |
| `-z`     | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å             |
| `-q`     | –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (RPS) |
| `-c`     | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  |
